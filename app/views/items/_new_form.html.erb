<%= render(Form::Component.new(url: items_path, method: :post, name: 'item-new')) do |form| %>
  <% form.with_error(@error) %>

  <% form.with_section do |section| %>
    <% section.with_title { 'Administrative Fields' } %>

    <% section.with_input_text(label: 'Human Readable Name',
                               value: @change_set.human_readable_name,
                               field: "item[human_readable_name]") %>

    <% section.with_input_text(label: 'Internal Notes',
                               value: @change_set.internal_notes,
                               field: "item[internal_notes][]") %>
  <% end %>

  <% form.with_section do |section| %>
    <% section.with_title { 'Descriptive Metadata' } %>

    <% ItemResource::DescriptiveMetadata::FIELDS.each do |field| %>
      <% section.with_input_text(label: field,
                                 value: @change_set.descriptive_metadata.send(field),
                                 field: "item[descriptive_metadata][#{field}][]") %>
    <% end %>
  <% end %>

  <% form.with_section do |section| %>
    <% section.with_title { 'Structural Metadata' } %>
    <% section.with_input_select(label: 'Viewing Hint',
                                 value: @change_set.structural_metadata.viewing_hint,
                                 field: "item[structural_metadata][viewing_hint]",
                                 options: ItemChangeSet::StructuralMetadataChangeSet::VIEWING_HINTS) %>
    <%= section.with_input_select(label: 'Viewing Direction',
                                  value: @change_set.structural_metadata.viewing_direction,
                                  field: "item[structural_metadata][viewing_direction]",
                                  options: ItemChangeSet::StructuralMetadataChangeSet::VIEWING_DIRECTIONS) %>

  <% end %>

  <% form.with_submit('Save') %>
<% end %>
