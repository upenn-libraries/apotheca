<%= render(Header::Component.new) do |header| %>
  <%= header.with_title(tag: :h3) { 'Assets' } %>
  <%= header.with_right_link(href: new_asset_path(item_id: @item.id)) { 'Add Asset' } %>
<% end %>

<div class="row">
  <div class="col-auto">
    <nav id="asset-list" class="flex-column align-items-stretch pe-4 border-end sticky-top">
      <nav class="nav nav-pills flex-column">
        <a class="nav-link" href="#arranged-assets">Arranged</a>
        <nav class="nav nav-pills flex-column">
          <% @arranged_assets.each do |a| %>
            <a class="nav-link ms-3 my-1" href="#<%= "asset-#{a.id}" %>"><%= a.display_title.truncate(20) %></a>
          <% end %>
        </nav>
        <a class="nav-link" href="#unarranged-assets">Unarranged</a>
        <nav class="nav nav-pills flex-column">
          <% @unarranged_assets.each do |a| %>
            <a class="nav-link ms-3 my-1" href="#<%= "asset-#{a.id}" %>"><%= a.display_title.truncate(20) %></a>
          <% end %>
        </nav>
      </nav>
    </nav>
    <%= link_to 'Arrange Assets', reorder_assets_item_path(@item), class: 'mt-5 btn btn-outline-primary' %>
  </div>
  <div class="col">
    <div id="assets-cards" data-bs-smooth-scroll="true" tabindex="0">
      <h4 id="arranged-assets" class="mb-3">Arranged</h4>
      <% if @arranged_assets&.any? %>
        <% @arranged_assets.each_with_index do |asset, i| %>
          <%= render(AssetInfo::Component.new(asset: asset, item: @item, index: i)) %>
        <% end %>
      <% else %>
        <p>No arranged assets</p>
      <% end %>
      <h4 id="unarranged-assets">Unarranged</h4>
      <% if @unarranged_assets&.any? %>
        <% @unarranged_assets.each_with_index do |asset, i| %>
          <%= render(AssetInfo::Component.new(asset: asset, item: @item, index: i)) %>
        <% end %>
      <% else %>
        <p>No unarranged assets</p>
      <% end %>
    </div>
  </div>
</div>
